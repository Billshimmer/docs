## 为什么我们需要这么多的前端框架


### 热门框架和社区讨论
作为现在web应用开发的热门框架，React、Vue、Angular都给予了我们很多的帮助，无论是从开发效率或者开发体验上来说，都有了相当大的提升。但是我们往往忽视了一个最重要的点：那就是为什么我们非要使用这些框架进行开发。如果你去社区抛出这个问题，他们也会给出这些类似答案:

1. 有框架可以组件化开发
2. 社区支撑完美(有人回答坑爹问题，小白友好)
3. 围绕框架有许多的第三方类库来辅助解决各种场景
4. 开源组件库多，有人维护，稳定可靠
5. 开发工具齐全，debugger很轻松
6. 有全家桶，一键启动所有我想要的(cli再包装大法好)


但是在我的观点中，最重要而且基本的原因只有一个：

在web页面开发场景下，保持数据与视图同步是一件很艰难的事情。

### 为何视图数据同步这么关键

打个比方，你开发一个基本的todolist微项目，如下图所示

![todo项目](https://static.gitpapa.com/2.gif)

一开始界面是空白的，每当用户完成输入之后，按下回车键，我们需要把这个item添加进数据数组以及更新UI视图。当用户点击**delete**的时候，我们需要删除指定的item项以及更新UI视图。在这些交互行为中,可以注意到的是**每当更新数据状态的时候，需要去更新UI视图**。

在上述例子中，我们需要通过JavaScript动态地创建dom结构(document.createElement)。那么第一个问题就是：JavaScript去动态修改UI视图会让视图代码的可读性下降(我们没法在任意一个时间点通过直观代码来确定视图结构，因为有可能视图一开始就是如此或者通过Js代码动态修改成这样，这一点并不能得到保证)。当然我们也可以使用一些模版引擎来解决这个问题，但是如果你组织管理着一个庞大的树状DOM结构，你会面临：更新Dom并不高效、你需要经常性去重新绑定事件回调函数。

其实上面的问题也并不算是最大的问题，最严重的是我们每次的数据状态更新都会伴随着UI视图更新。那么我们对等也需要许多代码来更新和操作UI上的dom元素。每当我们添加一个item项的时候，更新我们自己的数据只需要大概两行，却需要13行代码去更新视图Dom。

![showcode](https://static.gitpapa.com/B7901EF5-A44D-411F-B7F2-737CADD40EA5.png)


这些代码不仅难以阅读和维护，更为重要的是：它们是非常碎片化。如果我们的项目需要对接服务端接口的话，那么我们需要把前端数据和服务端数据进行对比，包括我们书中的那些标识Id和文本内容本身，代码量将会膨胀很多。

### 框架带来的模式

为了保证UI视图和数据保持同步却不是以碎片化的代码方式组织，框架的解决模式是声明氏视图的开发模式--这并不算什么社区支持，也不是工具，更加不是什么第三方类库。

在这种模式下，保证了一件最重要的事情就是在**更新UI视图的同时我们可以同步应用的数据状态**。


### 模式的工作方式

大致上基于两种基本策略:

* 重新渲染整个组件: React。每当一个组件的状态发生改变的时候，它会以内存的方式重新渲染Dom，并且与已经存在的Dom进行对比，就是大家常说的虚拟Dom，diff算法的技术。最后是计算出需要修改的Dom，对实际上存在的Dom进行操作修改。

* 监听观察视图和数据更新: Angular and Vue。数据变量被监听变化，如果Dom元素被改变，那么这些对应的数据变量也会被更新。同理，数据变量改变，亦然。

凡是使用 **V | A | R** 框架的同学都知道，在开发过程中我们很少直接操作Dom元素，正因为UI是可声明氏的，我们只需要添加我们的代码逻辑(用于修改我们的数据)，我们不需要添加额外的代码再来保证UI视图同步，这就是框架解决整个问题的思路。

### 总而言之

* JavaScript框架解决的最大问题是可以轻松地保持UI和数据同步。
* 通过原生Javascript做到视图和数据同步，很难做到书写出复杂，高效和方便阅读的代码。
* web开发环境中，也没有提供出直观合理的方式来解决整个问题，需要重新组织框架来搭建这种模式.


